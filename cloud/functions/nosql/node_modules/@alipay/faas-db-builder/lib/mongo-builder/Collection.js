"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CollectionBuilder=void 0;var constant_1=require("../common/constant");var error_1=require("../common/error");var util_1=require("../common/util");var Aggregate_1=require("./Aggregate");var Document_1=require("./Document");var Query_1=require("./Query");var CollectionBuilder=function(){function t(e){this.collectionName=e}t.prototype.add=function(e){if(Array.isArray(e.data)){return this.batchAdd(e)}return util_1.ActionBuilder.buildDocumentAction(constant_1.DocumentAction.create,this.collectionName,e.data)};t.prototype.batchAdd=function(e){if(e.data.length>200){throw error_1.DbBuildError.invalidParam("data","\u6700\u5927\u957F\u5EA6 200")}var r={$create:e.data};if(typeof e.ordered==="boolean"){r.$ordered=e.ordered}return util_1.ActionBuilder.buildDocumentAction(constant_1.DocumentAction.batchCreate,this.collectionName,r)};t.prototype.doc=function(e){return new Document_1.DocumentBuilder(this.collectionName,e)};t.prototype.limit=function(e){return new Query_1.QueryBuilder(this.collectionName).limit(e)};t.prototype.skip=function(e){return new Query_1.QueryBuilder(this.collectionName).skip(e)};t.prototype.where=function(e){return new Query_1.QueryBuilder(this.collectionName).where(e)};t.prototype.projection=function(e){return new Query_1.QueryBuilder(this.collectionName).projection(e)};t.prototype.orderBy=function(e,r){return new Query_1.QueryBuilder(this.collectionName).orderBy(e,r)};t.prototype.aggregate=function(){return new Aggregate_1.AggregateBuilder(this.collectionName)};t.prototype.get=function(){return new Query_1.QueryBuilder(this.collectionName).get()};t.prototype.count=function(){return new Query_1.QueryBuilder(this.collectionName).count()};return t}();exports.CollectionBuilder=CollectionBuilder;