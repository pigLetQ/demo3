"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UpdateRequest=void 0;var error_1=require("../common/error");var AbstractCommand_1=require("./AbstractCommand");var Operator_1=require("./Operator");var UpdateRequest=function(){function r(i,s){if(s===void 0){s=""}this.data=i;this.prefix=s}r.prototype.stringify=function(i){i=i||new Operator_1.Operator;for(var s in this.data){var n=this.prefix?"".concat(this.prefix,".").concat(s):s;var t=this.data[s];var e=typeof t;if(t instanceof AbstractCommand_1.AbstractCommand){if(!(t instanceof AbstractCommand_1.UpdateCommand)){throw error_1.DbBuildError.invalidCommand("Command \u4E0D\u662F\u66F4\u65B0\u64CD\u4F5C")}i.applyOperator(t.operator,n,t.stringify())}else if(e==="number"){i.set(n,t)}else if(e==="boolean"){i.set(n,t)}else if(e==="string"){i.set(n,t)}else if(e==="bigint"){i.set(n,t)}else if(e==="function"){throw error_1.DbBuildError.invalidParam(n,"\u4E0D\u652F\u6301\u51FD\u6570")}else if(e==="symbol"){throw error_1.DbBuildError.invalidParam(n,"\u4E0D\u652F\u6301 symbol")}else if(e==="undefined"){throw error_1.DbBuildError.invalidParam(n,"\u4E0D\u652F\u6301 undefined")}else if(t===null){i.set(n,t)}else if(Array.isArray(t)){i.set(n,t)}else{var d=new r(t,n);d.stringify(i)}}return i};r.prototype.toJSON=function(){var i=this.stringify();return i.emit()};return r}();exports.UpdateRequest=UpdateRequest;