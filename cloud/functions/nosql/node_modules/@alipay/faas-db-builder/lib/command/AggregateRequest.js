"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggregateRequest=void 0;var error_1=require("../common/error");var AbstractCommand_1=require("./AbstractCommand");var AggregateRequest=function(){function r(i,t){if(t===void 0){t=""}this.data=i;this.prefix=t}r.prototype.stringify=function(){var i=this;if(this.data instanceof AbstractCommand_1.AbstractCommand){if(!(this.data instanceof AbstractCommand_1.AggregateCommand)){throw error_1.DbBuildError.invalidCommand("Command \u4E0D\u662F\u805A\u5408\u64CD\u4F5C")}return this.data.stringify()}if(this.data===null){return this.data}if(Array.isArray(this.data)){return this.data.map(function(o,d){return new r(o,"".concat(i.prefix,".$.").concat(d)).stringify()})}switch(typeof this.data){case"number":return this.data;case"boolean":return this.data;case"string":return this.data;case"bigint":return this.data;case"function":throw error_1.DbBuildError.invalidParam(this.prefix,"\u4E0D\u652F\u6301\u51FD\u6570");case"symbol":throw error_1.DbBuildError.invalidParam(this.prefix,"\u4E0D\u652F\u6301 symbol");case"undefined":throw error_1.DbBuildError.invalidParam(this.prefix,"\u4E0D\u652F\u6301 undefined");default:{var t={};for(var a in this.data){var e=this.prefix?"".concat(this.prefix,".").concat(a):a;var n=this.data[a];var s=new r(n,e);t[a]=s.stringify()}return t}}};r.prototype.toJSON=function(){return this.stringify()};return r}();exports.AggregateRequest=AggregateRequest;