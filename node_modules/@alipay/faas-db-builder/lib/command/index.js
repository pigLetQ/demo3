"use strict";var __spreadArray=this&&this.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,a;n<o;n++){if(a||!(n in r)){if(!a)a=Array.prototype.slice.call(r,0,n);a[n]=r[n]}}return e.concat(a||Array.prototype.slice.call(r))};Object.defineProperty(exports,"__esModule",{value:true});exports.Command=exports.AggregateCommandFactory=void 0;var constant_1=require("../common/constant");var aggregate_1=require("./aggregate");var AggregatePipeline_1=require("./AggregatePipeline");var all_1=require("./query/all");var logic_1=require("./query/logic");var elemMatch_1=require("./query/elemMatch");var eq_1=require("./query/eq");var exists_1=require("./query/exists");var expr_1=require("./query/expr");var gt_1=require("./query/gt");var gte_1=require("./query/gte");var in_1=require("./query/in");var lt_1=require("./query/lt");var lte_1=require("./query/lte");var mod_1=require("./query/mod");var neq_1=require("./query/neq");var nin_1=require("./query/nin");var QueryChain_1=require("./query/QueryChain");var size_1=require("./query/size");var addToSet_1=require("./update/addToSet");var inc_1=require("./update/inc");var max_1=require("./update/max");var min_1=require("./update/min");var mul_1=require("./update/mul");var pop_1=require("./update/pop");var pull_1=require("./update/pull");var pullAll_1=require("./update/pullAll");var push_1=require("./update/push");var remove_1=require("./update/remove");var rename_1=require("./update/rename");var set_1=require("./update/set");var AggregateCommandFactory=function(){function e(){}e.prototype.pipeline=function(){return new AggregatePipeline_1.AggregatePipeline};e.prototype.avg=function(r){return new aggregate_1.AvgAggregateCommand(r)};e.prototype.count=function(){return new aggregate_1.CountAggregateCommand};e.prototype.max=function(r){return new aggregate_1.MaxAggregateCommand(r)};e.prototype.min=function(r){return new aggregate_1.MinAggregateCommand(r)};e.prototype.sum=function(r){return new aggregate_1.SumAggregateCommand(r)};e.prototype.and=function(r){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}var o=Array.isArray(r)?r:__spreadArray([r],t,true);return new aggregate_1.AndAggregateCommand(o)};e.prototype.or=function(r){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}var o=Array.isArray(r)?r:__spreadArray([r],t,true);return new aggregate_1.OrAggregateCommand(o)};e.prototype.not=function(r){return new aggregate_1.NotAggregateCommand(r)};e.prototype.cmp=function(r,t){var n=Array.isArray(r)?r:[r,t];return new aggregate_1.CMPAggregateCommand(n)};e.prototype.eq=function(r,t){var n=Array.isArray(r)?r:[r,t];return new aggregate_1.EqAggregateCommand(n)};e.prototype.neq=function(r,t){var n=Array.isArray(r)?r:[r,t];return new aggregate_1.NeqAggregateCommand(n)};e.prototype.lt=function(r,t){var n=Array.isArray(r)?r:[r,t];return new aggregate_1.LtAggregateCommand(n)};e.prototype.lte=function(r,t){var n=Array.isArray(r)?r:[r,t];return new aggregate_1.LteAggregateCommand(n)};e.prototype.gt=function(r,t){var n=Array.isArray(r)?r:[r,t];return new aggregate_1.GtAggregateCommand(n)};e.prototype.gte=function(r,t){var n=Array.isArray(r)?r:[r,t];return new aggregate_1.GteAggregateCommand(n)};e.prototype.addToSet=function(r){return new aggregate_1.AddToSetAggregateCommand(r)};e.prototype.arrayElemAt=function(r,t){var n=Array.isArray(r)?r:[r,t];return new aggregate_1.ArrayElemAtAggregateCommand(n)};e.prototype.indexOfArray=function(r,t,n,o){var a=Array.isArray(r)?r:[r,t,n,o].filter(function(u){return u!==void 0});return new aggregate_1.IndexOfArrayAggregateCommand(a)};e.prototype.isArray=function(r){return new aggregate_1.IsArrayAggregateCommand(r)};e.prototype.size=function(r){return new aggregate_1.SizeAggregateCommand(r)};e.prototype.in=function(r,t){var n=Array.isArray(r)?r:[r,t];return new aggregate_1.InAggregateCommand(n)};e.prototype.slice=function(r,t,n){var o=Array.isArray(r)?r:[r,t,n].filter(function(a){return a!==void 0});return new aggregate_1.SliceAggregateCommand(o)};e.prototype.map=function(r){return new aggregate_1.MapAggregateCommand(r)};e.prototype.ifNull=function(r,t){var n=Array.isArray(r)?r:[r,t];return new aggregate_1.IfNullAggregateCommand(n)};e.prototype.cond=function(r){return new aggregate_1.CondAggregateCommand(r)};e.prototype.switch=function(r){return new aggregate_1.SwitchAggregateCommand(r)};e.prototype.concat=function(r){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}var o=Array.isArray(r)?r:__spreadArray([r],t,true);return new aggregate_1.ConcatAggregateCommand(o)};e.prototype.dateToString=function(r){return new aggregate_1.DateToStringAggregateCommand(r)};e.prototype.toLower=function(r){return new aggregate_1.ToLowerAggregateCommand(r)};e.prototype.toUpper=function(r){return new aggregate_1.ToUpperAggregateCommand(r)};e.prototype.split=function(r,t){var n=Array.isArray(r)?r:[r,t];return new aggregate_1.SplitAggregateCommand(n)};e.prototype.substr=function(r,t,n){var o=Array.isArray(r)?r:[r,t,n];return new aggregate_1.SubstrAggregateCommand(o)};e.prototype.substrBytes=function(r,t,n){var o=Array.isArray(r)?r:[r,t,n];return new aggregate_1.SubstrBytesAggregateCommand(o)};e.prototype.first=function(r){return new aggregate_1.FirstAggregateCommand(r)};e.prototype.last=function(r){return new aggregate_1.LastAggregateCommand(r)};e.prototype.push=function(r){return new aggregate_1.PushAggregateCommand(r)};e.prototype.let=function(r){return new aggregate_1.LetAggregateCommand(r)};e.prototype.add=function(r){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}var o=Array.isArray(r)?r:__spreadArray([r],t,true);return new aggregate_1.AddAggregateCommand(o)};e.prototype.subtract=function(r,t){var n=Array.isArray(r)?r:[r,t];return new aggregate_1.SubtractAggregateCommand(n)};e.prototype.multiply=function(r){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}var o=Array.isArray(r)?r:__spreadArray([r],t,true);return new aggregate_1.MultiplyAggregateCommand(o)};e.prototype.divide=function(r,t){var n=Array.isArray(r)?r:[r,t];return new aggregate_1.DivideAggregateCommand(n)};e.prototype.abs=function(r){return new aggregate_1.AbsAggregateCommand(r)};e.prototype.ceil=function(r){return new aggregate_1.CeilAggregateCommand(r)};e.prototype.exp=function(r){return new aggregate_1.ExpAggregateCommand(r)};e.prototype.floor=function(r){return new aggregate_1.FloorAggregateCommand(r)};e.prototype.ln=function(r){return new aggregate_1.LnAggregateCommand(r)};e.prototype.log=function(r,t){var n=Array.isArray(r)?r:[r,t];return new aggregate_1.LogAggregateCommand(n)};e.prototype.log10=function(r){return new aggregate_1.Log10AggregateCommand(r)};e.prototype.mod=function(r,t){var n=Array.isArray(r)?r:[r,t];return new aggregate_1.ModAggregateCommand(n)};e.prototype.pow=function(r,t){var n=Array.isArray(r)?r:[r,t];return new aggregate_1.PowAggregateCommand(n)};e.prototype.sqrt=function(r){return new aggregate_1.SqrtAggregateCommand(r)};e.prototype.trunc=function(r){return new aggregate_1.TruncAggregateCommand(r)};e.prototype.mergeObjects=function(r){return new aggregate_1.MergeObjectsAggregateCommand(r)};e.prototype.month=function(r){return new aggregate_1.MonthAggregateCommand(r)};e.prototype.year=function(r){return new aggregate_1.YearAggregateCommand(r)};e.prototype.week=function(r){return new aggregate_1.WeekAggregateCommand(r)};e.prototype.isoWeek=function(r){return new aggregate_1.ISOWeekAggregateCommand(r)};return e}();exports.AggregateCommandFactory=AggregateCommandFactory;var Command=function(){function e(){this.aggregate=new AggregateCommandFactory;this.Sort=constant_1.Sort}e.prototype.addToSet=function(r){return new addToSet_1.AddToSetCommand(r)};e.prototype.inc=function(r){return new inc_1.IncCommand(r)};e.prototype.max=function(r){return new max_1.MaxCommand(r)};e.prototype.min=function(r){return new min_1.MinCommand(r)};e.prototype.mul=function(r){return new mul_1.MulCommand(r)};e.prototype.pop=function(r){return new pop_1.PopCommand(r)};e.prototype.pull=function(r){return new pull_1.PullCommand(r)};e.prototype.pullAll=function(r){return new pullAll_1.PullAllCommand(r)};e.prototype.push=function(r){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}return new(push_1.PushCommand.bind.apply(push_1.PushCommand,__spreadArray([void 0,r],t,false)))};e.prototype.remove=function(){return new remove_1.RemoveCommand};e.prototype.rename=function(r){return new rename_1.RenameCommand(r)};e.prototype.set=function(r){return new set_1.SetCommand(r)};e.prototype.expr=function(r){return new expr_1.ExprCommand(r)};e.prototype.and=function(){var r=[];for(var t=0;t<arguments.length;t++){r[t]=arguments[t]}r=Array.isArray(r[0])?r[0]:r;var n=new logic_1.AndCommand(r.map(QueryChain_1.QueryChain.unchain));return new QueryChain_1.QueryChain(n)};e.prototype.or=function(){var r=[];for(var t=0;t<arguments.length;t++){r[t]=arguments[t]}r=Array.isArray(r[0])?r[0]:r;var n=new logic_1.OrCommand(r.map(QueryChain_1.QueryChain.unchain));return new QueryChain_1.QueryChain(n)};e.prototype.not=function(r){var t=new logic_1.NotCommand(QueryChain_1.QueryChain.unchain(r));return new QueryChain_1.QueryChain(t)};e.prototype.nor=function(){var r=[];for(var t=0;t<arguments.length;t++){r[t]=arguments[t]}r=Array.isArray(r[0])?r[0]:r;var n=new logic_1.NorCommand(r.map(QueryChain_1.QueryChain.unchain));return new QueryChain_1.QueryChain(n)};e.prototype.eq=function(r){return new QueryChain_1.QueryChain(new eq_1.EqCommand(r))};e.prototype.neq=function(r){return new QueryChain_1.QueryChain(new neq_1.NeqCommand(r))};e.prototype.lt=function(r){return new QueryChain_1.QueryChain(new lt_1.LtCommand(r))};e.prototype.lte=function(r){return new QueryChain_1.QueryChain(new lte_1.LteCommand(r))};e.prototype.gt=function(r){return new QueryChain_1.QueryChain(new gt_1.GtCommand(r))};e.prototype.gte=function(r){return new QueryChain_1.QueryChain(new gte_1.GteCommand(r))};e.prototype.in=function(r){return new QueryChain_1.QueryChain(new in_1.InCommand(r))};e.prototype.nin=function(r){return new QueryChain_1.QueryChain(new nin_1.NinCommand(r))};e.prototype.exists=function(r){return new QueryChain_1.QueryChain(new exists_1.ExistsCommand(r))};e.prototype.mod=function(r,t){return new QueryChain_1.QueryChain(new mod_1.ModCommand(r,t))};e.prototype.all=function(r){return new QueryChain_1.QueryChain(new all_1.AllCommand(r))};e.prototype.elemMatch=function(r){return new QueryChain_1.QueryChain(new elemMatch_1.ElemMatchCommand(QueryChain_1.QueryChain.unchain(r)))};e.prototype.size=function(r){return new QueryChain_1.QueryChain(new size_1.SizeCommand(r))};return e}();exports.Command=Command;