var d=function(s,f,n,c){function a(e){return e instanceof n?e:new n(function(i){i(e)})}return new(n||(n=Promise))(function(e,i){function u(r){try{t(c.next(r))}catch(o){i(o)}}function l(r){try{t(c["throw"](r))}catch(o){i(o)}}function t(r){r.done?e(r.value):a(r.value).then(u,l)}t((c=c.apply(s,f||[])).next())})};var b=function(s,f){var n={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},c,a,e,i;return i={next:u(0),"throw":u(1),"return":u(2)},typeof Symbol==="function"&&(i[Symbol.iterator]=function(){return this}),i;function u(t){return function(r){return l([t,r])}}function l(t){if(c)throw new TypeError("Generator is already executing.");while(i&&(i=0,t[0]&&(n=0)),n)try{if(c=1,a&&(e=t[0]&2?a["return"]:t[0]?a["throw"]||((e=a["return"])&&e.call(a),0):a.next)&&!(e=e.call(a,t[1])).done)return e;if(a=0,e)t=[t[0]&2,e.value];switch(t[0]){case 0:case 1:e=t;break;case 4:n.label++;return{value:t[1],done:false};case 5:n.label++;a=t[1];t=[0];continue;case 7:t=n.ops.pop();n.trys.pop();continue;default:if(!(e=n.trys,e=e.length>0&&e[e.length-1])&&(t[0]===6||t[0]===2)){n=0;continue}if(t[0]===3&&(!e||t[1]>e[0]&&t[1]<e[3])){n.label=t[1];break}if(t[0]===6&&n.label<e[1]){n.label=e[1];e=t;break}if(e&&n.label<e[2]){n.label=e[2];n.ops.push(t);break}if(e[2])n.ops.pop();n.trys.pop();continue}t=f.call(s,n)}catch(r){t=[6,r];a=0}finally{c=e=0}if(t[0]&5)throw t[1];return{value:t[0]?t[1]:void 0,done:true}}};import{FaasError as h}from"./error";import{wrapCallback as w}from"./utils";export var createCallFunction=function(s){var f=s.httpclient;var n=function(c){return d(void 0,void 0,void 0,function(){var a,e,i,u,l,t,r;return b(this,function(o){switch(o.label){case 0:if(!c.name){throw h.INVALID_PARAM_ERR("name","\u7F3A\u5931")}a={"x-to-function-name":c.name,"x-alipay-cloud-mode":"function"};e="POST";i="/functions/invokeFunction";return[4,f.request({method:e,path:i,data:c.data,headers:a})];case 1:u=o.sent();if(u.status!==200){l=-1;t="";r=u.data;if(r){l=r.errCode,t=r.errMsg;if(r.errDetail){t+="\uFF0C\u8BE6\u60C5\uFF1A".concat(r.errDetail)}}throw h.SERVER_ERR(l,t,u.requestID,u.status)}return[2,{requestID:u.requestID,result:u.data}]}})})};return w(n)};