var l=function(){l=Object.assign||function(o){for(var r,n=1,c=arguments.length;n<c;n++){r=arguments[n];for(var a in r)if(Object.prototype.hasOwnProperty.call(r,a))o[a]=r[a]}return o};return l.apply(this,arguments)};var d=function(o,r,n,c){function a(t){return t instanceof n?t:new n(function(i){i(t)})}return new(n||(n=Promise))(function(t,i){function s(u){try{e(c.next(u))}catch(h){i(h)}}function f(u){try{e(c["throw"](u))}catch(h){i(h)}}function e(u){u.done?t(u.value):a(u.value).then(s,f)}e((c=c.apply(o,r||[])).next())})};var m=function(o,r){var n={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},c,a,t,i;return i={next:s(0),"throw":s(1),"return":s(2)},typeof Symbol==="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(u){return f([e,u])}}function f(e){if(c)throw new TypeError("Generator is already executing.");while(i&&(i=0,e[0]&&(n=0)),n)try{if(c=1,a&&(t=e[0]&2?a["return"]:e[0]?a["throw"]||((t=a["return"])&&t.call(a),0):a.next)&&!(t=t.call(a,e[1])).done)return t;if(a=0,t)e=[e[0]&2,t.value];switch(e[0]){case 0:case 1:t=e;break;case 4:n.label++;return{value:e[1],done:false};case 5:n.label++;a=e[1];e=[0];continue;case 7:e=n.ops.pop();n.trys.pop();continue;default:if(!(t=n.trys,t=t.length>0&&t[t.length-1])&&(e[0]===6||e[0]===2)){n=0;continue}if(e[0]===3&&(!t||e[1]>t[0]&&e[1]<t[3])){n.label=e[1];break}if(e[0]===6&&n.label<t[1]){n.label=t[1];t=e;break}if(t&&n.label<t[2]){n.label=t[2];n.ops.push(e);break}if(t[2])n.ops.pop();n.trys.pop();continue}e=r.call(o,n)}catch(u){e=[6,u];a=0}finally{c=t=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:true}}};import{Command as y}from"@alipay/faas-db-builder";import{FaasError as b}from"../error";import{Collection as p}from"./Collection";var w=function(){function o(r){this.httpclient=r}o.prototype.request=function(r){var n=r.method,c=r.path,a=r.data,t=r.headers;return d(this,void 0,void 0,function(){return m(this,function(i){switch(i.label){case 0:return[4,this.httpclient.request({method:n,path:c,data:a,headers:l({"x-alipay-cloud-mode":"mongo","x-data-api-type":"mongo","x-expire-timestamp":"".concat(Date.now()+6e4)},t)})];case 1:return[2,i.sent()]}})})};return o}();var v=function(){function o(r){this.command=new y;this.options=l(l({},r),{httpclient:new w(r.httpclient)})}o.prototype.collection=function(r){if(!r){throw b.INVALID_PARAM_ERR("collectionName","\u4E0D\u80FD\u4E3A\u7A7A")}return new p(r,this.options)};return o}();export{v as Database};