var l=function(i,r,t,u){var o=arguments.length,e=o<3?r:u===null?u=Object.getOwnPropertyDescriptor(r,t):u,s;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")e=Reflect.decorate(i,r,t,u);else for(var f=i.length-1;f>=0;f--)if(s=i[f])e=(o<3?s(e):o>3?s(r,t,e):s(r,t))||e;return o>3&&e&&Object.defineProperty(r,t,e),e};var c=function(i,r){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(i,r)};var h=function(i,r,t,u){function o(e){return e instanceof t?e:new t(function(s){s(e)})}return new(t||(t=Promise))(function(e,s){function f(a){try{n(u.next(a))}catch(m){s(m)}}function y(a){try{n(u["throw"](a))}catch(m){s(m)}}function n(a){a.done?e(a.value):o(a.value).then(f,y)}n((u=u.apply(i,r||[])).next())})};var p=function(i,r){var t={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},u,o,e,s;return s={next:f(0),"throw":f(1),"return":f(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function f(n){return function(a){return y([n,a])}}function y(n){if(u)throw new TypeError("Generator is already executing.");while(s&&(s=0,n[0]&&(t=0)),t)try{if(u=1,o&&(e=n[0]&2?o["return"]:n[0]?o["throw"]||((e=o["return"])&&e.call(o),0):o.next)&&!(e=e.call(o,n[1])).done)return e;if(o=0,e)n=[n[0]&2,e.value];switch(n[0]){case 0:case 1:e=n;break;case 4:t.label++;return{value:n[1],done:false};case 5:t.label++;o=n[1];n=[0];continue;case 7:n=t.ops.pop();t.trys.pop();continue;default:if(!(e=t.trys,e=e.length>0&&e[e.length-1])&&(n[0]===6||n[0]===2)){t=0;continue}if(n[0]===3&&(!e||n[1]>e[0]&&n[1]<e[3])){t.label=n[1];break}if(n[0]===6&&t.label<e[1]){t.label=e[1];e=n;break}if(e&&t.label<e[2]){t.label=e[2];t.ops.push(n);break}if(e[2])t.ops.pop();t.trys.pop();continue}n=r.call(i,t)}catch(a){n=[6,a];o=0}finally{u=e=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:true}}};import{WrapCallback as d}from"../decorator";import{FaasError as b}from"../error";import{Query as v}from"./Query";var g=function(){function i(r,t,u){this.collectionName=r;this.id=t;this.options=u}i.prototype.projection=function(r){this.query.projection(r);return this};i.prototype.field=function(r){this.query.field(r);return this};i.prototype.update=function(r){return h(this,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return[4,this.query.update(r)];case 1:return[2,t.sent()]}})})};i.prototype.updateAndReturn=function(r){return h(this,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return[4,this.query.updateAndReturn(r)];case 1:return[2,t.sent()]}})})};i.prototype.set=function(r){return h(this,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return[4,this.query.set(r)];case 1:return[2,t.sent()]}})})};i.prototype.remove=function(){return h(this,void 0,void 0,function(){return p(this,function(r){switch(r.label){case 0:return[4,this.query.remove()];case 1:return[2,r.sent()]}})})};i.prototype.get=function(){return h(this,void 0,void 0,function(){var r,t;return p(this,function(u){switch(u.label){case 0:return[4,this.query.get()];case 1:r=u.sent();t=r[0];if(!t){if(this.options.throwOnNotFound){throw b.NOT_FOUND_ERR("\u4E0D\u5B58\u5728_id \u4E3A ".concat(this.id," \u7684\u6587\u6863"))}return[2,null]}return[2,t]}})})};Object.defineProperty(i.prototype,"query",{get:function(){if(!this._query){this._query=new v(this.collectionName,this.options).where({_id:String(this.id)}).limit(1)}return this._query},enumerable:false,configurable:true});l([d(),c("design:type",Function),c("design:paramtypes",[Object]),c("design:returntype",Promise)],i.prototype,"update",null);l([d(),c("design:type",Function),c("design:paramtypes",[Object]),c("design:returntype",Promise)],i.prototype,"updateAndReturn",null);l([d(),c("design:type",Function),c("design:paramtypes",[Object]),c("design:returntype",Promise)],i.prototype,"set",null);l([d(),c("design:type",Function),c("design:paramtypes",[]),c("design:returntype",Promise)],i.prototype,"remove",null);l([d(),c("design:type",Function),c("design:paramtypes",[]),c("design:returntype",Promise)],i.prototype,"get",null);return i}();export{g as Document};